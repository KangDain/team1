<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sub1page</title>
    <link rel="stylesheet" href="./css/style.css?v=2" />
    <link rel="stylesheet" href="./css/custom-style.css" />
    <style>
      h1 {
        color: white;
      }
      /* ì§€ë„ ìŠ¤íƒ€ì¼ */
      div.right-sub > div#map {
        margin-top: 50px;
        margin-left: 50px;
        width: 1250px;
        height: 700px;
        position: relative;
        overflow: hidden;
        background: url("https://t1.daumcdn.net/mapjsapi/images/bg_tile.png");
      }
      /* ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
      .input-container {
        width: 300px;
        background-color: #333;
        color: white;
        padding: 10px;
        border-radius: 10px;
        margin-top: 20px;
      }
      .input-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .delete-btn {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
      }
      .input-list {
        max-height: 200px;
        overflow-y: auto;
        margin-top: 10px;
      }
      .input-item {
        display: flex;
        gap: 5px;
        margin-bottom: 10px;
      }
      input[type="text"] {
        width: 80px;
        padding: 5px;
        border: none;
        border-radius: 5px;
      }
      .add-btn {
        width: 100%;
        padding: 5px;
        margin-top: 10px;
        background-color: #555;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
      }
    </style>
    <script>
      const maxItems = 5; // ìµœëŒ€ ì…ë ¥ í•­ëª© ìˆ˜

      function addInput() {
        const inputList = document.getElementById("inputList");
        const currentItems =
          inputList.getElementsByClassName("input-item").length;

        if (currentItems < maxItems) {
          const uniqueId = `item-${Date.now()}`; // ê³ ìœ  ID ìƒì„±
          const newItem = document.createElement("div");
          newItem.classList.add("input-item");
          newItem.setAttribute("id", uniqueId);
          newItem.innerHTML = `
                <input type="text" placeholder="ì œëª©">
                <input type="text" placeholder="ê°€ìˆ˜">
                <input type="text" placeholder="Youtube ë§í¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
                <button class="delete-btn" onclick="deleteInput('${uniqueId}')">ğŸ—‘ï¸</button>
            `;
          inputList.appendChild(newItem);
        } else {
          alert("ìµœëŒ€ 5ê°œì˜ ì…ë ¥ í•„ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        }
      }

      function deleteInput(uniqueId) {
        const item = document.getElementById(uniqueId);
        if (item) {
          item.parentElement.removeChild(item);
        }
      }
    </script>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=fb23551b4674ffad9b9c3f879aada9a9&libraries=services"></script>
  </head>
  <body>
    <a href="./sub1page.html" class="logo" id="sub">Project Team 1</a>

    <div class="left-sub">
      <a href="./profilePage.html">
        <div class="mypage">
          <img src="./img/myPage.png" alt="#" />
        </div>
      </a>
    </div>

    <div class="right-top">
      <ul>
        <li><input type="search" placeholder="Search" /></li>
        <li><button>ì €ì¥ëœ ìœ„ì¹˜ ë¶ˆëŸ¬ì˜¤ê¸°</button></li>
      </ul>

      <ul id="right-tage">
        <li><a href="./sub1page.html">HOME</a></li>
        <li><a href="./index.html">LOGOUT</a></li>
      </ul>
    </div>

    <div class="right-sub">
      <div id="map"></div>

      <!-- ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ì…ë ¥ í¼ -->
      <div class="input-container">
        <h2>í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì œëª©</h2>
        <div class="input-field">
          <input type="text" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <h2>ì´ë¯¸ì§€ ì—…ë¡œë“œ</h2>
        <div class="input-field">
          <input
            type="text"
            id="file-name"
            placeholder="íŒŒì¼ì„ ì—…ë¡œë“œ í•´ì£¼ì„¸ìš”"
            readonly
          />
          <button id="upload-button">ğŸ“</button>
          <input
            type="file"
            id="file-input"
            style="display: none"
            accept="image/*"
          />
        </div>

        <h2>ì œëª© / ê°€ìˆ˜ / Youtube ë§í¬ ì…ë ¥</h2>
        <div class="input-list" id="inputList">
          <div class="input-item">
            <input type="text" placeholder="ì œëª©" />
            <input type="text" placeholder="ê°€ìˆ˜" />
            <input type="text" placeholder="Youtube ë§í¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" />
            <button class="delete-btn" onclick="deleteInput(this)">ğŸ—‘ï¸</button>
          </div>
        </div>
        <button class="add-btn" onclick="addInput()">+</button>

        <h2>ìœ„ì¹˜ ì„ íƒ</h2>
        <div class="input-field">
          <input type="text" placeholder="ì§€ë„ ìœ„ì— ìœ„ì¹˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”" />
        </div>

        <button class="save-btn">ìœ„ì¹˜ ì €ì¥í•˜ê¸°</button>
      </div>
    </div>
    <script>
      // ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ê°œì„ 
      const uploadButton = document.getElementById("upload-button");
      const fileInput = document.getElementById("file-input");
      const fileNameInput = document.getElementById("file-name");

      uploadButton.addEventListener("click", () => {
        fileInput.click();
      });

      fileInput.addEventListener("change", () => {
        if (fileInput.files.length > 0) {
          fileNameInput.value = fileInput.files[0].name;
        }
      });
      // ì§€ë„ ìƒì„± ë° ì˜µì…˜ ì„¤ì •
      var mapContainer = document.getElementById("map"),
        mapOption = {
          center: new kakao.maps.LatLng(37.5665, 126.978), // ì´ˆê¸° ì¤‘ì‹¬ ì¢Œí‘œ
          level: 3, // ì´ˆê¸° í™•ëŒ€ ë ˆë²¨
        };
      var map = new kakao.maps.Map(mapContainer, mapOption);

      // ì¥ì†Œ ê²€ìƒ‰ ì„œë¹„ìŠ¤ ê°ì²´ ìƒì„±
      var ps = new kakao.maps.services.Places();

      // ì§€ë„ í´ë¦­ ì´ë²¤íŠ¸
      kakao.maps.event.addListener(map, "click", function (mouseEvent) {
        const latlng = mouseEvent.latLng;

        // ë§ˆì»¤ ì—…ë°ì´íŠ¸
        addMarker(latlng);

        // ì…ë ¥ í•„ë“œì— ì¢Œí‘œ í‘œì‹œ
        const locationInput = document.querySelector(
          '.input-field input[placeholder="ì§€ë„ ìœ„ì— ìœ„ì¹˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”"]'
        );
        locationInput.value = `${latlng.getLat()}, ${latlng.getLng()}`;
      });

      // ë§ˆì»¤ ê°ì²´
      var marker = null;

      function addMarker(position) {
        // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
        if (marker) {
          marker.setMap(null);
        }

        // ìƒˆ ë§ˆì»¤ ìƒì„±
        marker = new kakao.maps.Marker({
          position: position,
          map: map,
        });
      }
    </script>
  </body>
</html>
